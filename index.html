<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.21.3/full/pyodide.js"></script>
  </head>
  <body style="background-color: lightblue;">
    <div id="debug-info" style="position: absolute; top: 10px; left: 10px; background-color: white; padding: 10px; border: 1px solid black; z-index: 100;"></div>
    <div id="viewer" style="width: 800px; height: 600px; border: 1px solid black;"></div>

    <script type="text/javascript">
      async function main() {
        let pyodide = await loadPyodide({
          indexURL: "https://cdn.jsdelivr.net/pyodide/v0.21.3/full/",
        });

        window.pyodide = pyodide;

        await pyodide.loadPackage("micropip");
        const micropip = pyodide.pyimport("micropip");
        await micropip.install("./dist/imposition-0.1.0-py3-none-any.whl");

        const response = await fetch("run_imposition.py");
        const pythonScript = await response.text();
        await pyodide.runPythonAsync(pythonScript);
      }

      main();
    </script>
  </body>
</html>
